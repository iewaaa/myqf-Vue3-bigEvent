import{d as L,u as T,r as g,w as q,c as w,a,b as z,o as v,e,f as n,g as b,l as x,h as p,i as h,j as y,k as N,E as c,m as F,p as M,n as P}from"./index-BrK2nRcc.js";import{E as j,a as A}from"./el-col-Bdry-deB.js";import{E as Z}from"./el-checkbox-D3yeXkvZ.js";import{E as D,a as G}from"./el-form-item-CqkGd93q.js";import{E as H}from"./el-link-BvXY0qJS.js";import{E as J,_ as K}from"./_plugin-vue_export-helper-CHYzevpX.js";import{E as O}from"./el-input-DGwWbuLA.js";import"./el-message-Kc6R7lWJ.js";import"./isEqual-_-sTB4rn.js";const S=m=>(M("data-v-fe6f3da0"),m=m(),P(),m),Q=S(()=>y("h1",null,"注册",-1)),W=S(()=>y("h1",null,"登录",-1)),X={class:"flex"},Y=L({__name:"LoginPage",setup(m){const C=z(),R=T();let u=g(!0),f=g();const s=g({username:"",password:"",repassword:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:10,message:"长度在1到10个字符",trigger:"blur"},{pattern:/^[a-zA-Z0-9]*$/,message:"用户名必须是字母或数字",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"6-15位非空格字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"6-15位非空格字符",trigger:"blur"},{validator:(l,o,d)=>{o===s.value.password?d():d(new Error("两次密码不一致"))},trigger:"blur"}]},I=async()=>{await f.value.validate();try{const l=await N(s.value);c.success(l.data.message),setTimeout(()=>{u.value=!1},2e3)}catch(l){c.error(l.response.data.message)}};q(u,()=>{s.value={username:"",password:"",repassword:""}});const U=async()=>{await f.value.validate();try{const l=await F({username:s.value.username,password:s.value.password});R.setToken(l.data.token),c.success(l.data.message),setTimeout(()=>{C.push("/")},2e3)}catch(l){c.error(l.response.data.message),console.log(l)}};return(l,o)=>{const d=A,r=D,i=O,k=J,_=H,E=G,$=Z,B=j;return v(),w(B,{class:"login-page"},{default:a(()=>[e(d,{span:12,class:"bg"}),e(d,{span:6,offset:3,class:"form"},{default:a(()=>[n(u)?(v(),w(E,{key:0,ref_key:"form",ref:f,size:"large",autocomplete:"off",model:s.value,rules:V},{default:a(()=>[e(r,null,{default:a(()=>[Q]),_:1}),e(r,{prop:"username"},{default:a(()=>[e(i,{"prefix-icon":n(b),placeholder:"请输入用户名",modelValue:s.value.username,"onUpdate:modelValue":o[0]||(o[0]=t=>s.value.username=t)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{prop:"password"},{default:a(()=>[e(i,{"prefix-icon":n(x),type:"password",placeholder:"请输入密码",modelValue:s.value.password,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value.password=t),"show-password":""},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{prop:"repassword"},{default:a(()=>[e(i,{"prefix-icon":n(x),type:"password",placeholder:"请输入再次密码",modelValue:s.value.repassword,"onUpdate:modelValue":o[2]||(o[2]=t=>s.value.repassword=t)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,null,{default:a(()=>[e(k,{class:"button",type:"primary","auto-insert-space":"",onClick:I},{default:a(()=>[p(" 注册 ")]),_:1})]),_:1}),e(r,{class:"flex"},{default:a(()=>[e(_,{type:"info",underline:!1,onClick:o[3]||(o[3]=t=>h(u)?u.value=!1:u=!1)},{default:a(()=>[p(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(v(),w(E,{key:1,ref_key:"form",ref:f,size:"large",autocomplete:"off",model:s.value,rules:V},{default:a(()=>[e(r,null,{default:a(()=>[W]),_:1}),e(r,{prop:"username"},{default:a(()=>[e(i,{"prefix-icon":n(b),placeholder:"请输入用户名",modelValue:s.value.username,"onUpdate:modelValue":o[4]||(o[4]=t=>s.value.username=t)},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{prop:"password"},{default:a(()=>[e(i,{name:"password","prefix-icon":n(x),type:"password",placeholder:"请输入密码",modelValue:s.value.password,"onUpdate:modelValue":o[5]||(o[5]=t=>s.value.password=t),"show-password":""},null,8,["prefix-icon","modelValue"])]),_:1}),e(r,{class:"flex"},{default:a(()=>[y("div",X,[e($,null,{default:a(()=>[p("记住我")]),_:1}),e(_,{type:"primary",underline:!1},{default:a(()=>[p("忘记密码？")]),_:1})])]),_:1}),e(r,null,{default:a(()=>[e(k,{class:"button",type:"primary","auto-insert-space":"",onClick:U},{default:a(()=>[p("登录")]),_:1})]),_:1}),e(r,{class:"flex"},{default:a(()=>[e(_,{type:"info",underline:!1,onClick:o[6]||(o[6]=t=>h(u)?u.value=!0:u=!0)},{default:a(()=>[p(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}}),pe=K(Y,[["__scopeId","data-v-fe6f3da0"]]);export{pe as default};
