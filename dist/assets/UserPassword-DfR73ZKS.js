import{d as E,r as m,u as V,aa as x,c as P,a as o,b as y,o as R,e,h as _,bZ as C,E as F}from"./index-BrK2nRcc.js";import{a as U,E as k}from"./el-col-Bdry-deB.js";import{E as N,a as S}from"./el-form-item-CqkGd93q.js";import{E as q}from"./_plugin-vue_export-helper-CHYzevpX.js";import{E as B}from"./el-input-DGwWbuLA.js";import{P as I}from"./PageContainer-DLmR2O10.js";import"./el-message-Kc6R7lWJ.js";const J=E({__name:"UserPassword",setup(T){const u=m(),n=V(),i=y(),l=m({old_pwd:"",new_pwd:"",re_pwd:""}),w=x({old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{min:6,max:15,message:"原密码长度应为6-15位",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:15,message:"新密码长度应为6-15位",trigger:"blur"},{validator:(s,r,a)=>{r===l.value.old_pwd?a(new Error("原密码和新密码不能一致")):a()},trigger:"blur"}],re_pwd:[{required:!0,message:"请确认新密码",trigger:"blur"},{min:6,max:15,message:"确认密码长度应为6-15位",trigger:"blur"},{validator:(s,r,a)=>{r!==l.value.new_pwd?a(new Error("新密码和确认密码不一致")):a()},trigger:"blur"}]}),f=async()=>{await u.value.validate();const s=await C(l.value);F.success(s.data.message),n.setUser({}),n.setToken(""),i.push("/login")},g=()=>{u.value.resetFields()};return(s,r)=>{const a=B,d=N,p=q,c=S,v=U,b=k;return R(),P(I,{title:"修改密码"},{default:o(()=>[e(b,null,{default:o(()=>[e(v,{span:12},{default:o(()=>[e(c,{model:l.value,rules:w,ref_key:"pwdFormRef",ref:u,"label-width":"120px"},{default:o(()=>[e(d,{label:"原密码",prop:"old_pwd"},{default:o(()=>[e(a,{modelValue:l.value.old_pwd,"onUpdate:modelValue":r[0]||(r[0]=t=>l.value.old_pwd=t),type:"password"},null,8,["modelValue"])]),_:1}),e(d,{label:"新密码",prop:"new_pwd"},{default:o(()=>[e(a,{modelValue:l.value.new_pwd,"onUpdate:modelValue":r[1]||(r[1]=t=>l.value.new_pwd=t),type:"password"},null,8,["modelValue"])]),_:1}),e(d,{label:"确认密码",prop:"re_pwd"},{default:o(()=>[e(a,{modelValue:l.value.re_pwd,"onUpdate:modelValue":r[2]||(r[2]=t=>l.value.re_pwd=t),type:"password"},null,8,["modelValue"])]),_:1}),e(d,null,{default:o(()=>[e(p,{type:"primary",onClick:f},{default:o(()=>[_("修改密码")]),_:1}),e(p,{onClick:g},{default:o(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})]),_:1})}}});export{J as default};
